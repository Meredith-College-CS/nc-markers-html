<!DOCTYPE html>
<head>
  <link rel="stylesheet" href="nc-markers.css">
</head>
<script>
function search(evt, cityName) {
  // Declare all variables
  var i, tabcontent, tablinks;

  // Get all elements with class="tabcontent" and hide them
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  // Show the current tab, and add an "active" class to the button that opened the tab
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>
<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
</head>
<body>
<div  class="home">
    <a href="https://www.ncdcr.gov/"><img class="logo" src="NC_logo.png"></a>
    <a id="nav-link" href="home.html">Home</a>
    <a id="nav-link" href="index1.html">Search</a>
    <a id="nav-link" href="index1.html">Favorites</a>
</div>

<section class="search">
<h1>Welcome to North Carolina Historical Markers! </h1>
<p>Please use the search options to find a historical marker</p>
<!-- Tab links -->
<div class="tab">
  <button class="tablinks" onclick="search(event, 'keyword')">Keyword</button>
  <button class="tablinks" onclick="search(event, 'county')">County/City</button>
  <button class="tablinks" onclick="search(event, 'zipcode')">Zipcode</button>
  <button class="tablinks" onclick="search(event, 'markerID')">Marker ID/Title</button>
</div>
<!-- Tab content -->
<div id="keyword" class="tabcontent">
  <h3>Keyword</h3>
  	 <form action="/form/searchByKey/submit" method="GET"> 
            <label>Keyword: </label>
            <input type="text" name="keyword" class="search">
            <input type="submit" name="submit" class="submit" value="Search">
            <input type="reset" value="Clear All">
    </form>
</div>

<div id="county" class="tabcontent">
  <h3>County or City</h3>
  	<form action="/form/markersInCounty/submit">
            <label>County: </label>
            <select id="countydp" name="county" class="search">
            </select>
            <input type="submit" name="search" class="submit" value="Search"/>
            <input type="reset" value="Clear All">
    </form>

      <!-- display county drop down menu-->
      <script>

          fetch("api/counties")  
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error, status = ${response.status}`);
            }
            return response.json();
          })
          .then((counties) => {
            // update the dropdown 
            jQuery.each( counties, function( index, county ) {
 
              $('#countydp').append(`<option value="${county}">
                        ${county}
                   </option>`); });

            console.log(counties);

          })
          .catch((error) => {
            const p = document.createElement("p");
            p.appendChild(document.createTextNode(`Error: ${error.message}`));
            document.body.append(p);
          });

      </script>
    
    <form action="/form/submit">
      <label>City: </label>
      <select name="city" class="search">
        <option value="none">-None-</option>
        </select>

      </select>
      <input type="submit" name="search" class="submit" value="Search"/>
      <input type="reset" value="Clear All">
</form>
</div>

<div id="zipcode" class="tabcontent">
  <h3>Zipcode</h3>
  	<form action="/form/submit" method="GET"> 
            <label>Zipcode: </label>
            <input type="text" name="zipcode" class="search">
            <input type="submit" name="submit" class="submit" value="Search">
            <input type="reset" value="Clear All">
    </form>
</div>

<div id="markerID" class="tabcontent">
  <h3>Marker ID/Title</h3>
  		<form action="form/searchById/submit" method="GET"> 
            <label>Marker Number: </label>
            <input type="text" name="markerid" class="search">
            <input type="submit" name="submit" class="submit" value="Search">
            <input type="reset" value="Clear All">
        </form>
</div>
</section>
</body>
</html>
